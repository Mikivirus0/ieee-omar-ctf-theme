{% extends "base.html" %}

{% block title %}Register{% endblock %}

{% block content %}
<div class="wrap">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="section-card">
                <div class="text-center mb-4">
                    <i class="fas fa-user-plus fa-3x text-white mb-3"></i>
                    <h2 class="section-title">Join IEEE OMAN CTF</h2>
                    <p class="muted">Create your account to participate</p>
                </div>

                <form method="POST" accept-charset="utf-8" autocomplete="off" role="form" class="form-register">
                    <input type="hidden" name="nonce" value="{{ nonce }}">
                    
                    {% if user_mode() == "teams" %}
                    <div class="form-group mb-3">
                        <label for="name" class="form-label text-white">Team Name</label>
                        <input 
                            class="form-control" 
                            type="text" 
                            id="name" 
                            name="name" 
                            placeholder="Team Name" 
                            required 
                            autofocus
                            minlength="3"
                            maxlength="50"
                        >
                        <small class="muted">3-50 characters. This will be your team's display name.</small>
                    </div>
                    {% else %}
                    <div class="form-group mb-3">
                        <label for="name" class="form-label text-white">Username</label>
                        <input 
                            class="form-control" 
                            type="text" 
                            id="name" 
                            name="name" 
                            placeholder="Username" 
                            required 
                            autofocus
                            minlength="3"
                            maxlength="50"
                        >
                        <small class="muted">3-50 characters. This will be your display name.</small>
                    </div>
                    {% endif %}
                    
                    <div class="form-group mb-3">
                        <label for="email" class="form-label text-white">Email Address</label>
                        <input 
                            class="form-control" 
                            type="email" 
                            id="email" 
                            name="email" 
                            placeholder="Email Address" 
                            required
                        >
                        <small class="muted">We'll use this for important updates about the CTF.</small>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group mb-3">
                                <label for="password" class="form-label text-white">Password</label>
                                <input 
                                    class="form-control" 
                                    type="password" 
                                    id="password" 
                                    name="password" 
                                    placeholder="Password" 
                                    required
                                    minlength="8"
                                >
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group mb-3">
                                <label for="password-confirm" class="form-label text-white">Confirm Password</label>
                                <input 
                                    class="form-control" 
                                    type="password" 
                                    id="password-confirm" 
                                    name="password-confirm" 
                                    placeholder="Confirm Password" 
                                    required
                                    minlength="8"
                                >
                            </div>
                        </div>
                    </div>

                    {% if user_mode() == "users" %}
                    <div class="form-group mb-3">
                        <label for="affiliation" class="form-label text-white">Affiliation <span class="muted">(Optional)</span></label>
                        <input 
                            class="form-control" 
                            type="text" 
                            id="affiliation" 
                            name="affiliation" 
                            placeholder="University, Company, etc." 
                        >
                    </div>
                    {% endif %}

                    <div class="form-group mb-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="terms" name="terms" required>
                            <label class="form-check-label muted" for="terms">
                                I agree to the <a href="/rules" target="_blank">competition rules</a> and code of conduct
                            </label>
                        </div>
                    </div>

                    <div class="form-group mb-4">
                        <button type="submit" class="btn btn-solid w-100">
                            <i class="fas fa-user-plus"></i> 
                            {% if user_mode() == "teams" %}Create Team{% else %}Create Account{% endif %}
                        </button>
                    </div>

                    <hr style="border-color: var(--border);">

                    <div class="text-center">
                        <small class="muted">
                            Already have an account? 
                            <a href="{{ url_for('auth.login') }}">Sign in here</a>
                        </small>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script defer src="{{ url_for('views.themes', theme='core', path='js/pages/register.js') }}"></script>
{% endblock %}